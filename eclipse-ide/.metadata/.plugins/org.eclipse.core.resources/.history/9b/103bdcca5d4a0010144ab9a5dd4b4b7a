package com.tom.example.batch.config;

import java.util.Optional;

import org.springframework.batch.item.ItemProcessor;
import org.springframework.stereotype.Component;

import com.tom.example.batch.student.Student;
import com.tom.example.batch.student.StudentRepository;

import lombok.RequiredArgsConstructor;

@Component
@RequiredArgsConstructor
public class StudentProcessor implements ItemProcessor<Student, Student> {

	private final StudentRepository repository;
	
	@Override
	public Student process(Student students) {
		
		Optional<Student> fromDb = repository.findById(students.getId());
		
		if(fromDb.isPresent()) {
			Student existent = fromDb.get();
			existent.setFirstName(students.getFirstName());
			existent.setLastName(students.getLastName());
			existent.setAge(students.getAge());
			
		}
		
		
		return students;
	}
	
}
